# Bomlok Code Generator

A command-line tool that automatically generates implementations of the Bomlok interface for all structs in your Go code.

## Installation

```bash
go install github.com/anton7r/bomlok/cmd/bomlok@latest
```

Or build from source:

```bash
go build -o bomlok ./cmd/bomlok
```

## Usage

```bash
bomlok [options]
```

### Options

- `-include <directory>` - Directory to include (can be specified multiple times, default: current directory)
- `-exclude <directory>` - Directory to exclude (can be specified multiple times)
- `-verbose` - Enable verbose output

### Examples

Generate Bomlok implementations for all structs in the current directory:
```bash
bomlok
```

Generate for specific directories:
```bash
bomlok -include=./models -include=./entities
```

Exclude vendor and test directories:
```bash
bomlok -include=. -exclude=vendor -exclude=.git -exclude=testdata
```

Verbose output:
```bash
bomlok -include=./src -exclude=test -verbose
```

## How It Works

The tool:
1. Recursively walks through all included directories
2. Parses each `.go` file (excluding `*_test.go` and `*_bomlok.go`)
3. Finds all struct definitions
4. Generates a corresponding `*_bomlok.go` file with Bomlok interface implementations
5. Each struct gets two methods:
   - `Bomlok_GetValue(field string) any` - Returns the value of a field by name
   - `Bomlok_Fields() []string` - Returns all field names

## Example

Given a file `models.go`:

```go
package models

type User struct {
    ID       int
    Name     string
    Email    string
    IsActive bool
}

type Product struct {
    SKU   string
    Price float64
}
```

Running `bomlok` will generate `models_bomlok.go`:

```go
// Code generated by bomlok. DO NOT EDIT.

package models

// Bomlok_GetValue returns the value of the field with the given name for User
func (s *User) Bomlok_GetValue(field string) any {
    switch field {
    case "ID":
        return s.ID
    case "Name":
        return s.Name
    case "Email":
        return s.Email
    case "IsActive":
        return s.IsActive
    default:
        return nil
    }
}

// Bomlok_Fields returns all field names for User
func (s *User) Bomlok_Fields() []string {
    return []string{
        "ID",
        "Name",
        "Email",
        "IsActive",
    }
}

// Similar implementations for Product...
```

## Integration with go generate

You can add a `//go:generate` directive to your package:

```go
//go:generate bomlok -include=.
package mypackage
```

Then run:
```bash
go generate ./...
```

## Notes

- Generated files are named `<original>_bomlok.go`
- The tool skips test files (`*_test.go`) and already generated files (`*_bomlok.go`)
- Excluded directories support glob patterns for directory names
